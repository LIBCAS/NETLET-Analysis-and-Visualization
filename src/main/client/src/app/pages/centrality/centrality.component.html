<mat-progress-bar *ngIf="loading" mode="indeterminate"></mat-progress-bar>
<div class="app-fxLayout app-row app-fill" style="position: relative;">
  <div style="flex: 1 30%;" class="app-filters">
    <div *ngIf="recipients">
      <h3>{{ 'field.recipients' | translate}}</h3>
      <mat-list style="max-height: 300px; width: 100%; overflow-y: scroll;">
        @for(k of recipients; track $index;){
        <mat-list-item (click)="clickRecipient(k)">
          <mat-checkbox [checked]="k.selected">{{ k.val}} ({{k.count}}) </mat-checkbox>
        </mat-list-item>
        }
      </mat-list>
    </div>
    <div *ngIf="mentioned">
      <h3>{{ 'field.mentioned' | translate}}</h3>
      <mat-list style="max-height: 300px; width: 100%; overflow-y: scroll;">
        @for(k of mentioned; track $index; let idx = $index){
        <mat-list-item (mouseover)="showNode(k, 'mentioned')"
          (mouseout)="hideNode()">
          <span [style.color]="colors[idx % colors.length]">{{ k.val}} ({{k.count}}) </span>
        </mat-list-item>
        }
      </mat-list>
    </div>

  </div>
  <div class="app-content">
    <div class="app-years">
      <app-years-chart *ngIf="solrResponse?.facets.date_year" [dateYearFacet]="solrResponse.facets.date_year"
        (onChangeLimits)="changeLimits($event)"></app-years-chart>
    </div>

    <div class="app-fxFlex">
      <div style="overflow: auto; height:100%; ">
        <div echarts style="width: 100%; height:100%;" [options]="graphOptions" (chartInit)="onGraphChartInit($event)">
        </div>
      </div>
    </div>
  </div>
</div>